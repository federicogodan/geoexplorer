<!DOCTYPE html>
<html>
	<head>
		<title>Nurc - Control Panel</title>
		 <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<!-- Ext resources -->
        <link rel="stylesheet" type="text/css" href="externals/ext/resources/css/ext-all.css">

		<script type="text/javascript" src="externals/ext/adapter/ext/ext-base.js"></script>
        <script type="text/javascript" src="externals/ext/ext-all.js"></script>
		<!-- control panel UI -->
		 <script type="text/javascript" src="script/GeoExplorer.js"></script>
		<!-- additional component from ext examples -->
		<link rel="stylesheet" type="text/css" href="externals/ext/examples/ux/fileuploadfield/css/fileuploadfield.css"/>
		<link rel="stylesheet" type="text/css" href="externals/ext/examples/ux/css/MultiSelect.css"/>
		<script type="text/javascript" src="externals/ext/examples/ux/fileuploadfield/FileUploadField.js"></script>
		<script type="text/javascript" src="externals/ext/examples/ux/MultiSelect.js"></script>
		<script type="text/javascript" src="externals/ext/examples/ux/ItemSelector.js"></script>
	
		
		
	</head>
	<body>
	    <script type="text/javascript">
		Ext.onReady(function(){
			
			//
			// fix for IE7 and IE8
			//
			if (!Date.prototype.toISOString) {
			    Date.prototype.toISOString = function() {
			        function pad(n) { return n < 10 ? '0' + n : n }
			        return this.getUTCFullYear() + '-'
			            + pad(this.getUTCMonth() + 1) + '-'
			            + pad(this.getUTCDate()) + 'T'
			            + pad(this.getUTCHours()) + ':'
			            + pad(this.getUTCMinutes()) + ':'
			            + pad(this.getUTCSeconds()) + 'Z';
			    };
			}
			
		    Ext.QuickTips.init();

			// Fake data used for development


		    // sample static data for the store
		    var myData = [
		        ['xyz', 'Rep10', 'model1, model2', 'zoe, laura',  '8/20 12:00am', '9/2 12:00am', '<img width="20px" src="./theme/app/img/nurc-logo.png"/> top', '8/20 12:00am'],
		        ['whz', 'Rep11b','', 'jane',  '8/20 12:00am', '9/2 12:00am', '<img width="20px" src="./theme/app/img/nurc-logo.png"/>', '8/20 12:00am']
		    ];


		    // create the data store
		    var store = new Ext.data.ArrayStore({
		        fields: [
				   {name: 'id'},
		           {name: 'name'},
		           {name: 'modelList' },
				   {name: 'vehicleList' },
		           {name: 'startTime',  type: 'date',   dateFormat: 'n/j h:ia'},
		           {name: 'endTime', type: 'date', dateFormat: 'n/j h:ia'},
				   {name: 'watermark' },
		           {name: 'lastChange', type: 'date', dateFormat: 'n/j h:ia'}
		        ]
		    });

		    // manually load local data
		    store.loadData(myData);

		    var vehicles = new Ext.data.ArrayStore({
		        data: [
		            ['zoe', 'zoe'], ['laura', 'laura'], ['noa', 'noa'], ['jane', 'jane'] 
				],
		        fields: ['value','text'],
		        sortInfo: {
		            field: 'value',
		            direction: 'ASC'
		        }
		    });

		    var models = new Ext.data.ArrayStore({
		        data: [
		            ['model1', 'model1'], ['model2', 'model2']
				],
		        fields: ['value','text'],
		        sortInfo: {
		            field: 'value',
		            direction: 'ASC'
		        }
		    });

		    /// END fake data

			var control = new ControlPanel({
				store: store,
				models: models,
				vehicles: vehicles
			});

			new Ext.Viewport({
					layout: 'border',
					title: 'Nurc - Control Panel',
					items: [{
						xtype: 'box',
						region: 'north',
						border: false,
		                height: 75,
						split: true,
						margins:"5 5 5 5",
						html: '<img style="position:absolute; left:0px; z-index:1000" src="./theme/app/img/nurc-logo.png" height="100%"/><div style= "float:right;text-align:left"><h1 style="color:black"></h1></div>',
		                bodyStyle: 'padding:0px;background-color: #0055bb;',
						height: 30
					},{
						// layout: 'border',
				    	id: 'cruise-browser',
						title:"Cruise List",
						tbar: [ { 
							icon:'./theme/app/img/silk/add.png', 
							text:"New cruise",
							handler: control.enable,
							scope: control
							} ],
				        region:'west',
				        border: false,
				        split:true,
						margins: '2 0 5 5',
				        width: 150,
				        minSize: 100,
				        maxSize: 500,
						items: control.getCruiseListView()
					},
					{
						id: 'content-panel',
						region: 'center', 
						width:700,
						layout: 'fit',
						margins: '2 5 5 0',
						activeItem: 0,
						border: false,
						frame:true,
						items: control.getCruisePanelView()
					}

					],
			        renderTo: Ext.getBody()
			    });


		});
		</script>
	</body>
</html>